{"version":3,"file":"static/js/731.87249843.chunk.js","mappings":"oMA+IA,UAxIA,WACI,IAAIA,GAAWC,EAAAA,EAAAA,MAEf,GAAgCC,EAAAA,EAAAA,UAAS,IAAzC,eAAOC,EAAP,KAAiBC,EAAjB,KACA,GAAgCF,EAAAA,EAAAA,UAAS,IAAzC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAAgCJ,EAAAA,EAAAA,UAAS,IAAzC,eAAOK,EAAP,KAAiBC,EAAjB,KACA,GAAwCN,EAAAA,EAAAA,UAAS,IAAjD,eAAOO,EAAP,KAAqBC,EAArB,KAEA,GAA0BR,EAAAA,EAAAA,WAAS,GAAnC,eAAOS,EAAP,KAAcC,EAAd,KACMC,EAAyB,KAAbN,GAAoC,KAAjBE,EAE/BK,EAAY,yCAAG,WAAOC,GAAP,mFACjBA,EAAEC,iBADe,UAGYC,EAAAA,EAAAA,IAAkBd,GAH9B,WAIK,IAJL,kDAQHe,EAAAA,EAAAA,IAA+BC,EAAAA,GAAMV,EAAcF,GARhD,yBAUHa,EAAAA,EAAAA,IAAcD,EAAAA,GAAAA,YAAkB,CAClCE,YAAclB,IAXT,0BAcQmB,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,SAAU,CACpDC,MAAQ,EACRC,OAASP,EAAAA,GAAAA,YAAAA,IACThB,SAAWA,EAASwB,cACpBtB,SAAAA,EACAI,aAAeA,EAAakB,cAC5BC,UAAY,GACZC,UAAY,GACZC,YAAcC,KAAKC,QAtBd,eAcLC,EAdK,kBAyBHC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAIX,EAAAA,GAAW,QAASS,EAAKG,IAAK,CAC3CX,MAAQQ,EAAKG,IACd,CAACC,OAAQ,IA3BH,QA6BTrC,EAASsC,EAAAA,GAAkB,CAACC,SAAU,IA7B7B,kDAiCTnC,EAAY,IACZE,EAAY,IACZE,EAAY,IACZE,EAAgB,IAChBE,EAAS,KAAM4B,SArCN,gCA0CbpC,EAAY,IACZQ,EAAS,gDA3CI,0DAAH,sDAmDrB,OAJG6B,EAAAA,EAAAA,YAAU,WACNC,SAASC,MAAQ,wBAIvB,iBAAKC,UAAU,+DAAf,WAEU,gBAAKA,UAAU,aAAf,UACI,gBAAKC,IAAI,kCAAkCC,IAAI,2BAA2BF,UAAU,kBAGxF,iBAAKA,UAAU,sBAAf,WACI,iBAAKA,UAAU,6EAAf,WAEI,eAAIA,UAAU,6BAAd,UACI,gBAAKC,IAAI,mBAAmBC,IAAI,WAAWF,UAAU,uBAGxDjC,IAAS,cAAGiC,UAAU,gCAAb,SAA8CjC,KAExD,kBAAMoC,SAAUjC,EAAckC,OAAO,OAArC,WAEI,kBACIC,KAAK,OACLC,YAAY,WACZ,aAAW,sBACXN,UAAU,2FACVO,SAAU,SAACpC,GAAD,OAAOX,EAAYW,EAAEqC,OAAOC,QACtCA,MAAOlD,KAGX,kBACI8C,KAAK,OACLC,YAAY,YACZ,aAAW,uBACXN,UAAU,2FACVO,SAAU,SAACpC,GAAD,OAAOT,EAAYS,EAAEqC,OAAOC,QACtCA,MAAOhD,KAGX,kBACI4C,KAAK,OACLC,YAAY,gBACZ,aAAW,2BACXN,UAAU,2FACVO,SAAU,SAACpC,GAAD,OAAOL,EAAgBK,EAAEqC,OAAOC,QAC1CA,MAAO5C,KAGX,kBACIwC,KAAK,WACLC,YAAY,WACZ,aAAW,sBACXN,UAAU,2FACVO,SAAU,SAACpC,GAAD,OAAOP,EAAYO,EAAEqC,OAAOC,QACtCA,MAAO9C,KAGX,mBACI0C,KAAK,SACLK,SAAUzC,EACV+B,UAAS,iEAA4D/B,GAAa,cAHtF,2BASR,gBAAK+B,UAAU,mGAAf,UACI,eAAGA,UAAU,UAAb,wCACI,SAAC,KAAD,CAAMW,GAAIjB,EAAAA,GAAcM,UAAU,6BAAlC","sources":["pages/signup.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\n\r\nimport * as ROUTES from \"../constants/routes\";\r\n\r\nimport {doc, auth, addDoc, setDoc, firestore, collection, updateProfile, doesUsernameExist, createUserWithEmailAndPassword} from \"../utils/firebase\";\r\n\r\nfunction Signup() {    \r\n    let navigate = useNavigate();\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n    const [fullName, setFullName] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [emailAddress, setEmailAddress] = useState(\"\");\r\n\r\n    const [error, setError] = useState(false);\r\n    const isInvalid = password === \"\" || emailAddress === \"\";\r\n\r\n    const handleSignup = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const usernameExists = await doesUsernameExist(username);\r\n        if(usernameExists === false) {\r\n\r\n            try {\r\n\r\n                await createUserWithEmailAndPassword(auth, emailAddress, password);\r\n                \r\n                await updateProfile(auth.currentUser, {\r\n                    displayName : username\r\n                });\r\n\r\n                let user = await addDoc(collection(firestore, \"users\"), {\r\n                    docId : 0,\r\n                    userId : auth.currentUser.uid,\r\n                    username : username.toLowerCase(),\r\n                    fullName,\r\n                    emailAddress : emailAddress.toLowerCase(),\r\n                    following : [],\r\n                    followers : [],\r\n                    dateCreated : Date.now()\r\n                });\r\n\r\n                await setDoc(doc(firestore, \"users\", user.id), {\r\n                    docId : user.id\r\n                }, {merge : true});\r\n\r\n                navigate(ROUTES.DASHBOARD, {replace : true});\r\n\r\n            } catch (error) {\r\n            \r\n                setUsername(\"\");\r\n                setFullName(\"\");\r\n                setPassword(\"\");\r\n                setEmailAddress(\"\");\r\n                setError(error.message);\r\n\r\n            }\r\n            \r\n        } else {\r\n            setUsername(\"\");\r\n            setError(\"Username already exists. Please try another.\");\r\n        } \r\n    };\r\n\r\n    useEffect(() => {\r\n        document.title = \"SlowKilo - Signup\";\r\n    });\r\n\r\n\treturn (\r\n\t\t<div className=\"container flex mx-auto max-w-screen-md items-center h-screen\">\r\n\r\n            <div className=\"flex w-3/5\">\r\n                <img src=\"/images/iphone-with-profile.jpg\" alt=\"iPhone with SlowKilo app\" className=\"max-w-full\" />\r\n            </div>\r\n\r\n            <div className=\"flex flex-col w-2/5\">\r\n                <div className=\"flex flex-col items-center bg-white p-4 rounded border border-gray-primary\">\r\n\r\n                    <h1 className=\"flex justify-center w-full\">\r\n                        <img src=\"/images/logo.png\" alt=\"SlowKilo\" className=\"mt-2 w-6/12 mb-4\" />\r\n                    </h1>\r\n\r\n                    {error && <p className=\"mb-4 text-xs text-red-primary\">{error}</p>}\r\n\r\n                    <form onSubmit={handleSignup} method=\"POST\">\r\n\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Username\" \r\n                            aria-label=\"Enter your Username\" \r\n                            className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n                            onChange={(e) => setUsername(e.target.value)}\r\n                            value={username}\r\n                        />\r\n\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Full name\" \r\n                            aria-label=\"Enter your full name\" \r\n                            className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n                            onChange={(e) => setFullName(e.target.value)}\r\n                            value={fullName}\r\n                        />\r\n\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Email Address\" \r\n                            aria-label=\"Enter your email address\" \r\n                            className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n                            onChange={(e) => setEmailAddress(e.target.value)}\r\n                            value={emailAddress}\r\n                        />\r\n\r\n                        <input \r\n                            type=\"password\" \r\n                            placeholder=\"Password\" \r\n                            aria-label=\"Enter your password\" \r\n                            className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            value={password}\r\n                        />\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isInvalid}\r\n                            className={`bg-blue-medium text-white w-full rounded h-8 font-bold ${isInvalid && \"opacity-50\"}`}\r\n                        >Signup</button>\r\n\r\n                    </form>\r\n                </div>\r\n            \r\n                <div className=\"flex justify-center items-center flex-col w-full bg-white p-4 rounded border border-gray-primary\">\r\n                    <p className=\"text-sm\">Don't have an account?{` `}\r\n                        <Link to={ROUTES.LOGIN} className=\"font-bold text-blue-medium\">Login</Link>\r\n                    </p>\r\n                </div>\r\n\r\n            </div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Signup;"],"names":["navigate","useNavigate","useState","username","setUsername","fullName","setFullName","password","setPassword","emailAddress","setEmailAddress","error","setError","isInvalid","handleSignup","e","preventDefault","doesUsernameExist","createUserWithEmailAndPassword","auth","updateProfile","displayName","addDoc","collection","firestore","docId","userId","toLowerCase","following","followers","dateCreated","Date","now","user","setDoc","doc","id","merge","ROUTES","replace","message","useEffect","document","title","className","src","alt","onSubmit","method","type","placeholder","onChange","target","value","disabled","to"],"sourceRoot":""}